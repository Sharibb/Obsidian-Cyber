

# How Does CSRF Work?

CSRF (Cross-Site Request Forgery) is an attack that tricks a victim into submitting a malicious request to a web application where they're authenticated. Here's how it works:

## The Basic Mechanism

1. **User Authentication**: The victim logs into a legitimate website (e.g., their bank) and gets a session cookie.

2. **Malicious Trigger**: While still authenticated, the victim visits an attacker-controlled page that contains hidden malicious code.

3. **Forged Request Execution**: The malicious code automatically sends requests to the legitimate site using the victim's active session.

## Key Characteristics

- **State-changing actions**: CSRF typically targets requests that change state (transfers, password changes, etc.)
- **No direct data theft**: Unlike XSS, the attacker doesn't see responses
- **Relies on cookie-based sessions**: Works because browsers automatically include session cookies with requests

## Example Attack Flow

```html
<!-- Malicious page code -->
<img src="https://bank.com/transfer?amount=1000&to=attacker" width="0" height="0">
```

When loaded:
1. Browser makes GET request to bank.com
2. Includes user's session cookie automatically
3. Bank processes request as legitimate since it came with valid credentials

## Modern Defenses

Common protections include:
- CSRF tokens (random values validated server-side)
- SameSite cookie attributes
- Requiring re-authentication for sensitive actions
- Checking Origin/Referer headers